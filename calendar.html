<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Holiday Calendar - Now and Us</title>
    <link rel="icon" type="image/png" href="favicon1.png">
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@800;900&family=Noto+Sans+KR:wght@300;500;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="background-decor">
        <div class="circle circle-1"></div>
        <div class="circle circle-2"></div>
    </div>

    <header>
        <div class="language-switcher">
            <button onclick="setLanguage('ko')">KR</button>
            <button onclick="setLanguage('en')">EN</button>
        </div>
        <h1 data-i18n="cal-header">ê³µíœ´ì¼ ìº˜ë¦°ë”</h1>
        <p data-i18n="cal-subtitle">ì„œë¡œì˜ ì‰¬ëŠ” ë‚ ì„ ë¯¸ë¦¬ ì²´í¬í•˜ê³  í•¨ê»˜ ê³„íšì„ ì„¸ì›Œë³´ì„¸ìš”</p>
        <nav class="content-nav" style="margin-top: 25px; display: flex; justify-content: center; gap: 15px; flex-wrap: wrap;">
            <a href="news.html" data-i18n="news-header" class="nav-content-link" style="background: rgba(255,255,255,0.2); color: white; text-decoration: none; padding: 10px 25px; border-radius: 25px; font-weight: bold; border: 1px solid rgba(255,255,255,0.4); backdrop-filter: blur(5px); transition: all 0.3s; font-size: 0.9rem;">ì„¸ê³„ ë‰´ìŠ¤</a>
            <a href="exchange.html" data-i18n="ex-header" class="nav-content-link" style="background: rgba(255,255,255,0.2); color: white; text-decoration: none; padding: 10px 25px; border-radius: 25px; font-weight: bold; border: 1px solid rgba(255,255,255,0.4); backdrop-filter: blur(5px); transition: all 0.3s; font-size: 0.9rem;">ì‹¤ì‹œê°„ í™˜ìœ¨</a>
            <a href="calendar.html" data-i18n="cal-header" class="nav-content-link" style="background: white; color: var(--primary-color); text-decoration: none; padding: 10px 25px; border-radius: 25px; font-weight: bold; border: 1px solid white; backdrop-filter: blur(5px); transition: all 0.3s; font-size: 0.9rem;">ê³µíœ´ì¼ ìº˜ë¦°ë”</a>
        </nav>
    </header>

    <main style="max-width: 1000px; margin: 0 auto; padding: 40px 20px;">
        <div style="text-align: right; margin-bottom: 20px;">
            <button onclick="toggleHelp()" data-i18n="cal-help-btn" style="background: var(--clock-accent); color: white; border: none; padding: 8px 20px; border-radius: 20px; cursor: pointer; font-weight: bold; font-size: 0.85rem; opacity: 0.9; transition: opacity 0.3s;">ë„ì›€ë§</button>
        </div>

        <div id="cal-help-box" style="display: none; background: #fdf2f5; border: 2px dashed var(--clock-accent); padding: 25px; border-radius: 20px; margin-bottom: 30px; text-align: left; animation: fadeIn 0.5s;">
            <h3 data-i18n="cal-help-title" style="margin-top: 0; color: var(--clock-accent); font-size: 1.1rem;">ğŸ’¡ ê³µíœ´ì¼ ìº˜ë¦°ë” ì´ìš© ì•ˆë‚´</h3>
            <p data-i18n="cal-help-text" style="margin-bottom: 0; line-height: 1.7; color: #555; font-size: 0.95rem;"></p>
        </div>

        <div class="calendar-controls" style="margin-bottom: 30px; display: flex; justify-content: center; gap: 20px; flex-wrap: wrap;">
            <div class="select-box" style="background: rgba(255,255,255,0.7); padding: 15px 25px; border-radius: 20px; box-shadow: 0 4px 10px rgba(0,0,0,0.05); display: flex; align-items: center; gap: 10px;">
                <label data-i18n="cal-my-title" style="font-weight: bold; color: var(--primary-color);">ë‚˜ì˜ ê³µíœ´ì¼</label>
                <select id="select-my-cal" onchange="renderSpecificHolidays(this.value, 'my-holidays-list')" style="padding: 8px 15px; border-radius: 10px; border: 2px solid var(--secondary-color); outline: none; font-family: inherit; cursor: pointer;"></select>
            </div>
            <div class="select-box" style="background: rgba(255,255,255,0.7); padding: 15px 25px; border-radius: 20px; box-shadow: 0 4px 10px rgba(0,0,0,0.05); display: flex; align-items: center; gap: 10px;">
                <label data-i18n="cal-partner-title" style="font-weight: bold; color: var(--clock-accent);">ìƒëŒ€ë°©ì˜ ê³µíœ´ì¼</label>
                <select id="select-partner-cal" onchange="renderSpecificHolidays(this.value, 'partner-holidays-list')" style="padding: 8px 15px; border-radius: 10px; border: 2px solid #e2cfea; outline: none; font-family: inherit; cursor: pointer;"></select>
            </div>
        </div>

        <div class="calendar-container" style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px;">
            <div class="holiday-section">
                <div id="my-holidays-list" class="holiday-list"></div>
            </div>
            <div class="holiday-section">
                <div id="partner-holidays-list" class="holiday-list"></div>
            </div>
        </div>

        <a href="index.html" class="back-link" data-i18n="ps-back" style="display:block; margin-top:40px; text-align:center; color: var(--primary-color); text-decoration: none; font-weight: 500;">â† ë©”ì¸ìœ¼ë¡œ ëŒì•„ê°€ê¸°</a>
    </main>

    <footer>
        <p data-i18n="footer-text">ë¨¼ ê±°ë¦¬ë¥¼ ì‚¬ë‘ìœ¼ë¡œ ì±„ì›Œê°€ëŠ” ëª¨ë“  ë¶„ë“¤ì„ ì‘ì›í•©ë‹ˆë‹¤ â¤ï¸</p>
        <div class="footer-links" style="margin-top: 15px; display: flex; justify-content: center; gap: 25px; align-items: center; flex-wrap: wrap;">
            <a href="board.html" data-i18n="board-header" style="color: var(--accent-color); text-decoration: none; font-size: 0.85rem; font-weight: bold; border-right: 1px solid #ddd; padding-right: 25px;">ê³ ê° ì†Œë¦¬í•¨ (Customer Center)</a>
            <a href="partnership.html" data-i18n="ps-header" style="color: var(--primary-color); text-decoration: none; font-size: 0.85rem; font-weight: 500; border-right: 1px solid #ddd; padding-right: 25px;">Partnership</a>
            <a href="privacy.html" data-i18n="privacy-link" style="color: #666; text-decoration: none; font-size: 0.85rem;">ê°œì¸ì •ë³´ì²˜ë¦¬ë°©ì¹¨</a>
            <a href="terms.html" data-i18n="terms-link" style="color: #666; text-decoration: none; font-size: 0.85rem;">ì´ìš©ì•½ê´€</a>
        </div>
    </footer>

    <script src="main.js"></script>
    <script>
        let allHolidayData = null;

        function toggleHelp() {
            const el = document.getElementById('cal-help-box');
            if (el) el.style.display = el.style.display === 'none' ? 'block' : 'none';
        }

        async function initCalendarPage() {
            try {
                const res = await fetch('holiday-data.json');
                if (!res.ok) throw new Error("Data not ready");
                allHolidayData = await res.json();
                
                const availableCountries = Object.keys(allHolidayData).sort();
                const mySelect = document.getElementById('select-my-cal');
                const partnerSelect = document.getElementById('select-partner-cal');
                
                availableCountries.forEach(country => {
                    const opt1 = new Option(country, country);
                    const opt2 = new Option(country, country);
                    if (country === myCountry) opt1.selected = true;
                    if (country === partnerCountry) opt2.selected = true;
                    mySelect.add(opt1);
                    partnerSelect.add(opt2);
                });

                renderSpecificHolidays(myCountry, 'my-holidays-list');
                renderSpecificHolidays(partnerCountry, 'partner-holidays-list');
            } catch (e) {
                const msg = `<p style="color: #999; padding: 20px;">ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ì…ë‹ˆë‹¤... (ì ì‹œ í›„ ë‹¤ì‹œ í™•ì¸í•´ì£¼ì„¸ìš”)</p>`;
                document.getElementById('my-holidays-list').innerHTML = msg;
                document.getElementById('partner-holidays-list').innerHTML = msg;
            }
        }

        function renderSpecificHolidays(countryName, elementId) {
            if (!allHolidayData) return;
            const holidays = allHolidayData[countryName];
            const el = document.getElementById(elementId);
            
            if (!holidays || holidays.length === 0) {
                el.innerHTML = `<p style="color: #999; padding: 20px;">ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</p>`;
                return;
            }

            const today = new Date().toISOString().split('T')[0];

            el.innerHTML = holidays.map(h => {
                const isPast = h.date < today;
                return `
                    <div class="holiday-card" style="background: white; padding: 15px 20px; border-radius: 15px; margin-bottom: 12px; box-shadow: 0 4px 10px rgba(0,0,0,0.05); display: flex; justify-content: space-between; align-items: center; opacity: ${isPast ? '0.5' : '1'};">
                        <div style="text-align: left;">
                            <div style="font-weight: bold; color: var(--text-color);">${currentLanguage === 'ko' ? h.localName : h.name}</div>
                            <div style="font-size: 0.8rem; color: #999;">${h.name !== h.localName ? h.name : ''}</div>
                        </div>
                        <div style="font-weight: 900; color: var(--primary-color); font-size: 0.95rem;">${h.date.replace(/-/g, '.')}</div>
                    </div>
                `;
            }).join('');
        }

        document.addEventListener('DOMContentLoaded', () => {
            setTimeout(initCalendarPage, 100);
        });
    </script>
    <style>
        @media (max-width: 768px) {
            .calendar-container { grid-template-columns: 1fr; }
        }
    </style>
</body>
</html>
    <style>
        @media (max-width: 768px) {
            .calendar-container { grid-template-columns: 1fr; }
        }
    </style>
</body>
</html>