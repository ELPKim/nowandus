<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>World News - Now and Us</title>
    <link rel="icon" type="image/png" href="favicon1.png">
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@800;900&family=Noto+Sans+KR:wght@300;500;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="background-decor">
        <div class="circle circle-1"></div>
        <div class="circle circle-2"></div>
    </div>

    <header>
        <div class="language-switcher">
            <button onclick="setLanguage('ko')">KR</button>
            <button onclick="setLanguage('en')">EN</button>
        </div>
        <h1 data-i18n="news-header">세계 뉴스</h1>
        <p data-i18n="news-subtitle">서로의 나라에서 일어나고 있는 소식을 확인해보세요</p>
        <nav class="content-nav" style="margin-top: 25px; display: flex; justify-content: center; gap: 15px; flex-wrap: wrap;">
            <a href="news.html" data-i18n="news-header" class="nav-content-link" style="background: white; color: var(--primary-color); border-color: white;">세계 뉴스</a>
            <a href="exchange.html" data-i18n="ex-header" class="nav-content-link">실시간 환율</a>
            <a href="calendar.html" data-i18n="cal-header" class="nav-content-link">공휴일 캘린더</a>
        </nav>
    </header>

    <main style="max-width: 1000px; margin: 0 auto; padding: 40px 20px;">
        <div style="text-align: right; margin-bottom: 20px;">
            <button onclick="toggleHelp()" data-i18n="news-help-btn" style="background: var(--clock-accent); color: white; border: none; padding: 8px 20px; border-radius: 20px; cursor: pointer; font-weight: bold; font-size: 0.85rem; opacity: 0.9; transition: opacity 0.3s;">도움말</button>
        </div>

        <div id="news-help-box" style="display: none; background: #fdf2f5; border: 2px dashed var(--clock-accent); padding: 25px; border-radius: 20px; margin-bottom: 30px; text-align: left; animation: fadeIn 0.5s;">
            <h3 data-i18n="news-help-title" style="margin-top: 0; color: var(--clock-accent); font-size: 1.1rem;">💡 세계 뉴스 이용 안내</h3>
            <p data-i18n="news-help-text" style="margin-bottom: 0; line-height: 1.7; color: #555; font-size: 0.95rem;"></p>
        </div>

        <div class="news-controls" style="margin-bottom: 30px; display: flex; justify-content: center; gap: 20px; flex-wrap: wrap;">
            <div class="select-box" style="background: rgba(255,255,255,0.7); padding: 15px 25px; border-radius: 20px; box-shadow: 0 4px 10px rgba(0,0,0,0.05); display: flex; align-items: center; gap: 10px;">
                <label data-i18n="news-label-my" style="font-weight: bold; color: var(--primary-color);">나의 나라</label>
                <select id="select-my-country" onchange="fetchNews(this.value, 'my-country-news')" style="padding: 8px 15px; border-radius: 10px; border: 2px solid var(--secondary-color); outline: none; font-family: inherit; cursor: pointer;"></select>
            </div>
            <div class="select-box" style="background: rgba(255,255,255,0.7); padding: 15px 25px; border-radius: 20px; box-shadow: 0 4px 10px rgba(0,0,0,0.05); display: flex; align-items: center; gap: 10px;">
                <label data-i18n="news-label-partner" style="font-weight: bold; color: var(--clock-accent);">상대방 나라</label>
                <select id="select-partner-country" onchange="fetchNews(this.value, 'partner-country-news')" style="padding: 8px 15px; border-radius: 10px; border: 2px solid #e2cfea; outline: none; font-family: inherit; cursor: pointer;"></select>
            </div>
        </div>

        <div class="news-container" style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px;">
            <div class="news-section">
                <div id="my-country-news">
                    <!-- News items will be injected here -->
                </div>
            </div>
            <div class="news-section">
                <div id="partner-country-news">
                    <!-- News items will be injected here -->
                </div>
            </div>
        </div>
        <a href="index.html" class="back-link" data-i18n="ps-back" style="display:block; margin-top:30px; text-align:center; color: var(--primary-color); text-decoration: none; font-weight: 500;">← 메인으로 돌아가기</a>
    </main>

    <footer>
        <p data-i18n="footer-text">먼 거리를 사랑으로 채워가는 모든 분들을 응원합니다 ❤️</p>
        <div class="footer-links" style="margin-top: 15px; display: flex; justify-content: center; gap: 25px; align-items: center; flex-wrap: wrap;">
            <a href="board.html" data-i18n="board-header" style="color: var(--accent-color); text-decoration: none; font-size: 0.85rem; font-weight: bold; border-right: 1px solid #ddd; padding-right: 25px;">고객 소리함 (Customer Center)</a>
            <a href="partnership.html" data-i18n="ps-header" style="color: var(--primary-color); text-decoration: none; font-size: 0.85rem; font-weight: 500; border-right: 1px solid #ddd; padding-right: 25px;">Partnership</a>
            <a href="privacy.html" data-i18n="privacy-link" style="color: #666; text-decoration: none; font-size: 0.85rem;">개인정보처리방침</a>
            <a href="terms.html" data-i18n="terms-link" style="color: #666; text-decoration: none; font-size: 0.85rem;">이용약관</a>
        </div>
    </footer>

    <script src="main.js"></script>
    <script>
        function toggleHelp() {
            const el = document.getElementById('news-help-box');
            if (el) el.style.display = el.style.display === 'none' ? 'block' : 'none';
        }

        async function initNewsPage() {
            try {
                const res = await fetch('news-data.json');
                const allNews = await res.json();
                const availableCountries = Object.keys(allNews).sort();
                
                const mySelect = document.getElementById('select-my-country');
                const partnerSelect = document.getElementById('select-partner-country');
                
                availableCountries.forEach(country => {
                    const opt1 = new Option(country, country);
                    const opt2 = new Option(country, country);
                    if (country === myCountry) opt1.selected = true;
                    if (country === partnerCountry) opt2.selected = true;
                    mySelect.add(opt1);
                    partnerSelect.add(opt2);
                });
                
                fetchNews(myCountry, 'my-country-news');
                fetchNews(partnerCountry, 'partner-country-news');
            } catch (e) {
                console.error("Failed to load country list", e);
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            setTimeout(initNewsPage, 100);
        });
    </script>
    <style>
        @media (max-width: 768px) {
            .news-container { grid-template-columns: 1fr; }
        }
    </style>
</body>
</html>